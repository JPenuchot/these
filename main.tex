%%%% Modèle proposé par kira.ribeiro@universite-paris-saclay.fr  %%%%
%%%% màj : 27/01/2023 %%%%

\documentclass[english,12pt,a4paper]{book}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[english]{babel}
\usepackage[default,oldstyle, scale=.95]{opensans} % police Open Sans
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{csquotes}
\usepackage{caption}
\captionsetup[figure]{font=small,labelfont=small}
\usepackage{xcolor} % ou color selon l'installation
\definecolor{Prune}{RGB}{99,0,60} % l14-33 : couleurs de la charte graphique upsaclay
\definecolor{B1}{RGB}{49,62,72} 
\definecolor{C1}{RGB}{124,135,143}
\definecolor{D1}{RGB}{213,218,223}
\definecolor{A2}{RGB}{198,11,70}
\definecolor{B2}{RGB}{237,20,91}
\definecolor{C2}{RGB}{238,52,35}
\definecolor{D2}{RGB}{243,115,32}
\definecolor{A3}{RGB}{124,42,144}
\definecolor{B3}{RGB}{125,106,175}
\definecolor{C3}{RGB}{198,103,29}
\definecolor{D3}{RGB}{254,188,24}
\definecolor{A4}{RGB}{0,78,125}
\definecolor{B4}{RGB}{14,135,201}
\definecolor{C4}{RGB}{0,148,181}
\definecolor{D4}{RGB}{70,195,210}
\definecolor{A5}{RGB}{0,128,122}
\definecolor{B5}{RGB}{64,183,105}
\definecolor{C5}{RGB}{140,198,62}
\definecolor{D5}{RGB}{213,223,61}
\usepackage{mdframed}
\usepackage{multirow} %% Pour mettre un texte sur plusieurs rangées
\usepackage{multicol} %% Pour mettre un texte sur plusieurs colonnes
\usepackage{tikz}
\usepackage{graphicx}
\usepackage[absolute]{textpos} 
\usepackage{colortbl}
\usepackage{array}
\usepackage{geometry}
\usepackage{titlesec}
\usepackage{hyperref}
% paramétrage couleur des liens hypertextes, toujours garder colorlinks=true
\hypersetup{
    colorlinks=true,
    linkcolor=black,
    urlcolor=A5}

\usepackage{listings}
\usepackage{xspace}
\usepackage{graphicx}
\usepackage{biblatex}

\usepackage{subfiles} % Garder a la fin

% \renewcommand{\FrenchLabelItem}{\textbullet}

% pour ne garder que les n°de page en milieu-bas
% et supprimer les indications de chapitre en marge haute
\pagestyle{plain}

\addbibresource{bibliography/biblio.bib}
\addbibresource{bibliography/comptime.bib}
\addbibresource{bibliography/ctbench.bib}
\addbibresource{bibliography/metalanguages.bib}
\addbibresource{bibliography/metalibraries.bib}
\addbibresource{bibliography/poacher.bib}
\addbibresource{bibliography/simd.bib}
% \addbibresource{bibliography/stdcpp.bib}

\newcommand{\constexpr}{\lstinline{constexpr}\xspace}
\newcommand{\cpp}{\textsc{C++}\xspace}
\newcommand{\ctbench}{\textsc{ctbench}\xspace}
\newcommand{\dsels}{\textit{DSEL}s\xspace}
\newcommand{\dsel}{\textit{DSEL}\xspace}
\newcommand{\dsls}{\textit{DSL}s\xspace}
\newcommand{\dsl}{\textit{DSL}\xspace}
\newcommand{\eg}{\textit{e.g.}\xspace}
\newcommand{\grapher}{\textsc{grapher}\xspace}
\newcommand{\ie}{\textit{i.e.}\xspace}

\lstset{
  frame=single,
  basicstyle={\small\ttfamily},
  numberstyle=\tiny\color{C1},
  keywordstyle=\color{B2},
  commentstyle=\color{D4},
  stringstyle=\color{A3},
  breaklines=true,
  tabsize=2,
  showstringspaces=false
}

\lstdefinelanguage{cmake}{
  morekeywords={STRING, BOOL, CACHE, REQUIRED},
  morecomment=[l]{\#},
  morestring=[b]"
}

\begin{document}

\begin{titlepage}

%\thispagestyle{empty}

\newgeometry{left=6cm,bottom=2cm, top=1cm, right=1cm}

\tikz[remember picture,overlay]
\node[opacity=1,inner sep=0pt] at (-13mm,-135mm){
  \includegraphics{ups/frame.pdf}
};

%*****************************************************
%******** NUMÉRO D'ORDRE DE LA THÈSE À COMPLÉTER *****
%******** POUR LE SECOND DÉPOT                   *****
%*****************************************************

\color{white}

\begin{picture}(0,0)
\put(-152,-743){\rotatebox{90}{\Large \textsc{THESE DE DOCTORAT}}} \\
\put(-120,-743){\rotatebox{90}{NNT : 2020UPASA001}}
\end{picture}

%*****************************************************
%******************** TITRE **************************
%*****************************************************

\flushright
\vspace{10mm} % à régler éventuellement
\color{Prune}

\fontsize{22}{26}\selectfont
  \Huge Techniques avanc\'ees de g\'en\'eration de code pour le parall\'elisme\\

\normalsize
\color{black}
\Large{\textit{Advanced techniques for parallel code generation}} \\
%*****************************************************


\fontsize{8}{12}\selectfont

\vspace{1.5cm}

\normalsize
\textbf{Thèse de doctorat de l'université Paris-Saclay} \\

\vspace{6mm}

% TODO
\small École doctorale n$^{\circ}$ d'accréditation, dénomination et sigle\\
\small Spécialité de doctorat: voir annexe\\
\small Graduate School : voir annexe. Référent : voir annexe \\
\vspace{6mm}

% TODO: Verifier l'unite de recherche
\footnotesize Thèse préparée dans la (ou les) unité(s) de recherche
\textbf{STIC} (voir annexe), sous la direction de \textbf{Joel FALCOU},
titre du directeur ou de la directrice de thèse \\
\vspace{15mm}

\textbf{Thèse soutenue à Paris-Saclay, le JJ mois AAAA, par}\\
\bigskip
\Large {\color{Prune} \textbf{Jules P\'ENUCHOT}} % Changer le Prénom et le NOM

%************************************
\vspace{\fill} % ALIGNER LE TABLEAU EN BAS DE PAGE
%************************************

\bigskip

\flushleft
\small {\color{Prune} \textbf{Composition du jury}}\\
{\color{Prune} \scriptsize {Membres du jury avec voix délibérative}} \\
\vspace{2mm}
\scriptsize
\begin{tabular}{|p{7cm}l}
\arrayrulecolor{Prune}
\textbf{Prénom NOM} &   Président ou Présidente\\ 
Titre, Affiliation & \\
\textbf{Prénom NOM} &  Rapporteur \& Examinateur / trice \\ 
Titre, Affiliation   &   \\ 
\textbf{Prénom NOM} &  Rapporteur \& Examinateur / trice \\ 
Titre, Affiliation  &   \\ 
\textbf{Prénom NOM} &  Examinateur ou Examinatrice \\ 
Titre, Affiliation   &   \\ 
\textbf{Prénom NOM} &  Examinateur ou Examinatrice \\ 
Titre, Affiliation   &   \\ 
 

\end{tabular} 

\end{titlepage}


% page des résumés à garder en 2ème page. Si les résumés sont trop longs pour tenir sur une seule et même page, on peut mettre un résumé par page
\thispagestyle{empty}
\newgeometry{top=1.5cm, bottom=1.25cm, left=2cm, right=2cm}


\noindent
\includegraphics[height=2.45cm]{ups/logo_STIC.png}
\vspace{1cm}
%*****************************************************

\small

\begin{mdframed}[linecolor=Prune,linewidth=1]

\textbf{Titre:} Techniques avanc\'ees de g\'en\'eration de code pour le
parall\'elisme

\noindent \textbf{Mots clés:} M\'etaprogrammation, compilation, C++ % TODO

\vspace{-.5cm}
\begin{multicols}{2}
\noindent \textbf{Résumé:} Mettre le sum ici % TODO
\end{multicols}

\end{mdframed}

\vspace{8mm}

\begin{mdframed}[linecolor=Prune,linewidth=1]

\textbf{Title:} Advanced techniques for parallel code generation

\noindent \textbf{Keywords:} Metaprogramming, compilation, C++ % TODO

\begin{multicols}{2}
\noindent \textbf{Abstract:} Mettre l'abstract ici % TODO
\end{multicols}
\end{mdframed}

\titleformat{\chapter}[hang]{\bfseries\Large\color{Prune}}{\thechapter\ -}{.1ex}
{\vspace{0.1ex}}[\vspace{1ex}]\titlespacing{\chapter}{0pc}{0ex}{0.5pc}

\titleformat{\section}[hang]{\bfseries\normalsize}{\thesection\ .}{0.5pt}
{\vspace{0.1ex}}[\vspace{0.1ex}]\titlespacing{\section}{1.5pc}{4ex plus .1ex minus .2ex}{.8pc}

\titleformat{\subsection}[hang]{\bfseries\small}{\thesubsection\ .}{1pt}
{\vspace{0.1ex}}[\vspace{0.1ex}]\titlespacing{\subsection}{3pc}{2ex plus .1ex minus .2ex}{.1pc}

\newgeometry{top=4cm, bottom=4cm, left=2cm, right=2cm}

\tableofcontents

\newgeometry{top=4cm, bottom=4cm, left=4cm, right=4cm}

% ------------------------------------------------------------------------------
% Commandes pour la these de Jules

% ------------------------------------------------------------------------------
% These de Jules

\part{Existing code generation techniques through template metaprogramming}

\subfile{chapters/tmp-for-hpc/main.tex}
\subfile{chapters/tmp-state-of-the-art/main.tex}

\part{Metaprogramming beyond expression templates}

\subfile{chapters/ctbench/main.tex}
\subfile{chapters/poacher/main.tex}

\printbibliography

\chapter{Appendix}

Voila une ptite annexe

\end{document}
