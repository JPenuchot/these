\documentclass[../main]{subfiles}
\begin{document}

\section{Discussion}

% [TODO] Talk about how pass-by-generator actually kinda sucks
% because of constexpr constraints, and how serializing takes more code
% but less time debugging stuff related to constexpr constraints.
% Serializing makes dealing with dynamic memory easier because codegen functions
% only deal with static memory.

We wanted to demonstrate that using \gls{constexpr} code to implement parsers for
\gls{dsel} of arbitrary syntax in \cpp23 is possible despite limitations on
\gls{constexpr} memory allocation, and that doing so is possible with reasonable
impact on compilation times.

We achieved that by implementing a \gls{constexpr} parser for the Brainfuck language,
with code generation backends implementing three different strategies to
transform \gls{constexpr} program representations into code using function
generators, \glspl{et}, and non-type template parameters.
We also demonstrated the interoperability of these \gls{constexpr} parsers by
implementing a parser for mathematical languages that can be used as a frontend
for existing high performance \cpp computation libraries.

Our benchmarks highlight compilation time scaling issues with pass-by-generator
and \gls{et} code generation strategies for large programs, and
excellent scaling capabilities for non-type template parameter based code
generation strategies. These results can be used to decide which strategy to
adopt for the implementation of future \gls{dsel} based on \gls{constexpr} parsers
based on considerations for compilation times or implementation complexity.

Going forward, \gls{constexpr} parser generators could help reduce
\gls{dsel} implementation time and help embed more languages into \cpp23.
Further research has to be made to determine the impact of such generators on
\gls{dsel} implementation complexity and compilation times.

% On avait tel objectif X et Y
% On montre qu'on a fait X et que ca permet Y
% Les benchmarks montrent la pluvalue avec un temps de compil raisonnable
% Nos travaux futurs: AI deep learning blockchain

% TODO: Il faut un nouveau paradigme pour la metaprog qui offre des manieres
% plus directes de generer du code.
% Passer par des NTTP, ca va deux secondes...

% TODO: Talk about faer

% \textbf{faer} \cite{faer}
%
% \begin{lstlisting}[
%   language=c++
% ]{}
% use faer::{mat, Mat, prelude::*};
%
% // empty 0x0 matrix
% let m0: Mat<f64> = Mat::new();
%
% // zeroed 4x3 matrix
% let m1: Mat<f64> = Mat::zeros(4, 3);
%
% // 3x3 identity matrix
% let m2 = Mat::from_fn(
%   3, 3,
%   |i, j| if i == j { 1.0 } else { 0.0 });
%
% // 4x2 matrix with custom data
% let m3 = mat![
%     [4.93, 2.41],
%     [5.43, 4.33],
%     [9.83, 1.59],
%     [7.13, 5.02_f64],
% ];
%
% // compute the qr decomposition of a matrix
% let qr_decomposition = m3.qr();
% \end{lstlisting}

\end{document}
